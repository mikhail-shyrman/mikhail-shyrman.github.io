!function(e){"use strict";e.fn.customSelectMenu=function(s){function a(s){var a=s.parent().attr("data-select-name"),t=s.attr("data-option-value"),n=s.text(),d=e('input[name="'+a+'"]');s.closest(".custom-select-menu").prev().val(t).trigger("change"),s.parent().find("."+l.selectedClass).removeClass(l.selectedClass),s.addClass(l.selectedClass),d.val(t),s.parent().parent().find("label").text(n),""!==d.val()?s.parent().parent().find("label").addClass(l.selectionMadeClass):s.parent().parent().find("label").removeClass(l.selectionMadeClass),s.parent().hide(),"none"!==s.parent().css("display")?s.parent().parent().find("label").toggleClass(l.openedClass):s.parent().parent().find("label").removeClass(l.openedClass)}var l=e.extend({menuClass:"custom-select-menu",openedClass:"opened",selectedClass:"selected",selectionMadeClass:"selection-made"},s);return this.each(function(){var s,t,n,d,i,o,r,C,c=e(this),p=c.attr("name"),u=c.attr("id");c.hide(),t=e('<div class="'+l.menuClass+'">').attr("tabindex",0),u&&(t.attr("id",u),c.removeAttr("id")),s=e('<input type="hidden" name="'+p+'" value="" />'),c.find(":selected")?(r=c.find(":selected"),C=r.attr("value"),d=r.text(),C?(n=e('<label class="'+l.selectionMadeClass+'">'+d+"</label>"),s.val(C)):n=e("<label>"+d+"</label>")):(d=c.find(":first").text(),n=e("<label>"+d+"</label>")),i=e('<ul data-select-name="'+p+'">').hide(),c.after(t.append(n,i,s)),c.find("option").each(function(){var s=e(this).text(),a=e(this).attr("value"),t=this.className||"";s==d&&(t+=" "+l.selectedClass),o=e(a?'<li data-option-value="'+a+'" class="'+t+'">'+s+"</li>":'<li class="'+t+'">'+s+"</li>"),i.append(o)}),t.on("click",function(s){var t=e(s.target);t.is("label")&&(n.toggleClass(l.openedClass),n.parent().find("ul").toggle()),t.is("li")&&a(t)}),t.on("keyup",function(s){38!==s.keyCode&&40!==s.keyCode||(e(this).find(n).addClass(l.openedClass),e(this).find(i).show());var t=e(this).find("li"),d=e(this).find("."+l.selectedClass),o="",r="";40===s.keyCode&&(d.removeClass(l.selectedClass),o=d.next(),o.length>0?o.addClass(l.selectedClass):t.first().addClass(l.selectedClass)),38===s.keyCode&&(d.removeClass(l.selectedClass),r=d.prev(),r.length>0?r.addClass(l.selectedClass):t.last().addClass(l.selectedClass)),13===s.keyCode&&a(e(this).find("."+l.selectedClass))}),t.on("blur",function(){e(this).find(i).is(":visible")&&(e(this).find(n).removeClass(l.openedClass),e(this).find(i).hide())}),e("html").on("keyup",function(e){27===e.keyCode&&(n.removeClass(l.openedClass),i.hide())}),e("html").on("mousedown",function(s){e(s.target).parents().addBack().is("."+l.menuClass+" ul, ."+l.menuClass+" label")||(e("."+l.menuClass+" label").removeClass(l.openedClass),e("."+l.menuClass+" ul").hide())})})}}(jQuery);